{# admin base template from which all other templates will extend #}
{% set navigation_bar = [['dashboard', 'Dashboard'], ['pages', 'Pages'], ['content', 'Content'], ['themes', 'Themes'], ['search', 'Search']] %}
{# set the active page to be styled. Do this on every different page #}
{% set active_page = active_page|default('dashboard') %}
<!DOCTYPE html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
    Light CMS |{% block title %}{% endblock %}
    </title>
    <style>
    {% block style %}
        @import url(https://fonts.googleapis.com/css?family=Raleway);
        @import '{{ app.request.basepath }}/css/admin_default_theme.css';
    {% endblock %}
    </style>
</head>
<body>
    <header class="header">
        {% block header %}
            
            <h1>
            CMS
            </h1>
        {% endblock %}
    </header>
    
    <nav>
        <ul class="navbar">
            {% include 'admin/mainNav.html.twig' %}
        </ul>
    </nav>
    {# a sub div to hold a sub nav bar and a search box #}
    <div class="sub-section">
        <div class="sub-search">
            {% block searchbox %}
                <form id="searchForm">
                    <input type="text" placeholder="Search" class="input-box" onkeyup="showResult(this.value)">
                    <div id="livesearch"></div>
                </form>
            {% endblock %}
            
            
        </div>
    </div>
    
    {# main content area #}
    <div class="container">
        
        <div class="section">
            
            {% block sidebar %}
                <h3>Current Pages</h3>
                <p>
                    Below is a list of your current pages
                </p>
               
                <table>
                    <tr>
                        <th>
                            Name
                        </th>
                        <th>
                            Template
                        </th>
                        <th>
                            Date Created
                        </th>
                    </tr>
                    {% if pages is defined %}
                        {% for page in pages %}
                            <tr>
                                <td>{{ page.pageName }}</td>
                                <td>{{ page.pageTemplate }}</td>
                                <td>{{ page.created }}</td>
                            </tr>
                        {% endfor %}
                    {% endif %}
                </table>
            {% endblock %}
        </ul>
    </div>
    <div class="main-section">
        {% block content %}
        {% endblock %}
    </div>
    <div class="section">
        <p>Welcome,{{ user.username }}</p>
        <p>{{ app.session.id }}</p>
        <a class="logout" href="{{ path('admin_logout') }}">Logout</a>
    </div>
    
</div>
{# a space for a link to go backwards in the navigation tree #}
<div class="back-link">
    {% block back_link %}
    </body>
{% endblock %}
</div>
{# the footer #}
{% block footer %}
<footer class="footer">
    &copy; CMS<br>
    {# the twig now function gives the current time with a filter for the current date (taken from the twig docs) #}
    {{ "now"|date(timezone="Europe/Dublin") }}
</footer>
{% endblock %}
{# javascript functions #}
{% block javascript %}
<script src="{{ app.request.basepath }}/js/ajax.js"></script>
{% endblock %}
</body>
</html>